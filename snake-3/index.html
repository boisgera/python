<!DOCTYPE html><html lang="fr" data-astro-cid-vc27etzb> <head><title>Lost</title><meta charset="UTF-8"><meta name="viewport" content="width=device-width"><link rel="icon" type="image/svg+xml" href="/favicon.svg"><meta name="generator" content="Astro v3.6.5"><style>aside[data-astro-cid-fjubpvhp]{border:.125rem solid var(--dark);border-radius:.25rem;margin-bottom:1rem}summary[data-astro-cid-fjubpvhp]{padding:1rem;border-top-left-radius:.25rem;border-top-right-radius:.25rem;background-color:var(--light)}details[data-astro-cid-fjubpvhp]>summary[data-astro-cid-fjubpvhp]{list-style:none;border-radius:.25rem;border-bottom-left-radius:0;border-bottom-right-radius:0}.minmax[data-astro-cid-fjubpvhp]{color:var(--dark)}details[data-astro-cid-fjubpvhp].lock{pointer-events:none}details[data-astro-cid-fjubpvhp].lock .minmax[data-astro-cid-fjubpvhp]{display:none}details[data-astro-cid-fjubpvhp][open] .open[data-astro-cid-fjubpvhp]{display:inline}details[data-astro-cid-fjubpvhp][open] .closed[data-astro-cid-fjubpvhp]{display:none}details[data-astro-cid-fjubpvhp]:not([open]) .open[data-astro-cid-fjubpvhp]{display:none}details[data-astro-cid-fjubpvhp]:not([open]) .closed[data-astro-cid-fjubpvhp]{display:inline}.content[data-astro-cid-fjubpvhp]{border-bottom-right-radius:.25rem;border-bottom-left-radius:.25rem}svg[data-astro-cid-fjubpvhp]{height:1rem}.circle[data-astro-cid-fjubpvhp]{height:1.25rem;width:1.25rem;border-radius:.25rem;background-color:var(--dark);color:#fff;display:flex;justify-content:center;align-items:center}
</style>
<link rel="stylesheet" href="/python/_astro/burger.acc87366.css" /><script type="module">document.startViewTransition&&document.querySelectorAll("details").forEach(t=>{t.addEventListener("click",e=>{e.preventDefault(),document.startViewTransition(()=>t.toggleAttribute("open"))})});
</script></head> <body data-astro-cid-vc27etzb> <nav data-astro-cid-vc27etzb> <a href="/python" data-astro-cid-vc27etzb><svg viewBox="0 0 128 128" style="width:2rem;height:2rem;" data-astro-cid-vc27etzb astro-icon="python"><linearGradient id="astroicon:pythona" x1="70.252" x2="170.659" y1="1237.476" y2="1151.089" gradientTransform="matrix(.563 0 0 -.568 -29.215 707.817)" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#5A9FD4"/><stop offset="1" stop-color="#306998"/></linearGradient><linearGradient id="astroicon:pythonb" x1="209.474" x2="173.62" y1="1098.811" y2="1149.537" gradientTransform="matrix(.563 0 0 -.568 -29.215 707.817)" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#FFD43B"/><stop offset="1" stop-color="#FFE873"/></linearGradient><path fill="url(#astroicon:pythona)" d="M63.391 1.988c-4.222.02-8.252.379-11.8 1.007-10.45 1.846-12.346 5.71-12.346 12.837v9.411h24.693v3.137H29.977c-7.176 0-13.46 4.313-15.426 12.521-2.268 9.405-2.368 15.275 0 25.096 1.755 7.311 5.947 12.519 13.124 12.519h8.491V67.234c0-8.151 7.051-15.34 15.426-15.34h24.665c6.866 0 12.346-5.654 12.346-12.548V15.833c0-6.693-5.646-11.72-12.346-12.837-4.244-.706-8.645-1.027-12.866-1.008zM50.037 9.557c2.55 0 4.634 2.117 4.634 4.721 0 2.593-2.083 4.69-4.634 4.69-2.56 0-4.633-2.097-4.633-4.69-.001-2.604 2.073-4.721 4.633-4.721z" transform="translate(0 10.26)"/><path fill="url(#astroicon:pythonb)" d="M91.682 28.38v10.966c0 8.5-7.208 15.655-15.426 15.655H51.591c-6.756 0-12.346 5.783-12.346 12.549v23.515c0 6.691 5.818 10.628 12.346 12.547 7.816 2.297 15.312 2.713 24.665 0 6.216-1.801 12.346-5.423 12.346-12.547v-9.412H63.938v-3.138h37.012c7.176 0 9.852-5.005 12.348-12.519 2.578-7.735 2.467-15.174 0-25.096-1.774-7.145-5.161-12.521-12.348-12.521h-9.268zM77.809 87.927c2.561 0 4.634 2.097 4.634 4.692 0 2.602-2.074 4.719-4.634 4.719-2.55 0-4.633-2.117-4.633-4.719 0-2.595 2.083-4.692 4.633-4.692z" transform="translate(0 10.26)"/><radialGradient id="astroicon:pythonc" cx="1825.678" cy="444.45" r="26.743" gradientTransform="matrix(0 -.24 -1.055 0 532.979 557.576)" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#B8B8B8" stop-opacity=".498"/><stop offset="1" stop-color="#7F7F7F" stop-opacity="0"/></radialGradient><path fill="url(#astroicon:pythonc)" d="M97.309 119.597c0 3.543-14.816 6.416-33.091 6.416-18.276 0-33.092-2.873-33.092-6.416 0-3.544 14.815-6.417 33.092-6.417 18.275 0 33.091 2.872 33.091 6.417z" opacity=".444"/></svg></a> </nav> <main data-astro-cid-vc27etzb> <header style="margin-bottom: 3rem;"> <div style="margin-bottom: 1.5rem;"> <h1 style="font-size: 2.25rem; line-height:1; font-weight:700; color: #020617;
    margin-bottom: 1rem;"> Lost </h1> <p style="color: #64748b;"> When your snake wanders in a maze... </p> </div> <div style="display: flex; justify-content: left; gap: 1rem;"> <img src="https://2.gravatar.com/avatar/39ec5d637b0753448b97a8e63855a45cb6708d033b656fe9f1d3314bb4bfb202?size=128" alt="avatar" style="margin: 0px; flex: 0 48px; width: 48px; height: 48px; border-radius: 50%;"> <p style="margin: 0px; flex: auto; font-size: 0.875rem; line-height: 1.25rem; color: #1e293b;"> Sébastien Boisgérault <br> Associate Professor, ITN Mines Paris – PSL </p><p></p>  </div> </header>

<img src="/python/_astro/maze.a0c71dd2_Z28XEGK.webp" transition:name="mazeImage" alt="Black Maze Wall by Mitchell Luo" style="border-radius: 0.375rem;" width="640" height="449" loading="lazy" decoding="async">
<h2 id="introduction">Introduction</h2>
<p>The aim of this project is to develop an “automatic navigation system” for
our snake, to allow it to reach the fruit despite a complex environment
with rocks that should be avoided.</p>
<h2 id="getting-started">Getting Started</h2>
<p>For the sake of simplicity, we will consider here only mazes defined within
a 30x30 grid. We will represent them in Python as sets of pairs of integers
between 0 and 29, where each pair represents the coordinates of an empty
cell of the maze.
The pair <code>(0, 0)</code> corresponds to the top left corner of the grid.</p>

<figure><img src="/python/_astro/random-maze.3275c71a_Z1ALm1C.webp" alt="A Random Maze" style="border-radius: 0.375rem;margin-left:0; margin-right:0;" width="660" height="697" loading="lazy" decoding="async"><figcaption><p>A maze generated (pseudo-)randomly with a mix of 75% empty cells (in white)
and 25% walls (in black).</p></figcaption></figure>
<h2 id="maze-visualizer">Maze Visualizer</h2>
<p>We store the description of such mazes in files, using a
simple (but undocumented) file format.
For example the maze displayed above is stored as <a href="../random-maze.py"><code>random-maze.py</code></a>.</p>
<ul>
<li>
<p>Download this example maze file.</p>
</li>
<li>
<p>Inspect it contents and make an educated guess
about the file format specification.</p>
</li>
<li>
<p>Construct the maze object <code>random_maze</code> associated to this file.</p>
</li>
</ul>
<aside data-astro-cid-fjubpvhp style="--light: #fbcfe8;--dark: #db2777;"> <details class="" data-astro-cid-fjubpvhp style="--light: #fbcfe8;--dark: #db2777;"> <summary style="display:flex;align-items:center;justify-content:space-between;; --light: #fbcfe8;--dark: #db2777;" data-astro-cid-fjubpvhp> <span style="display:flex;gap:0.5em;align-items:center;; --light: #fbcfe8;--dark: #db2777;" data-astro-cid-fjubpvhp> <span class="circle" data-astro-cid-fjubpvhp style="--light: #fbcfe8;--dark: #db2777;"> <svg viewBox="0 0 24 24" data-astro-cid-fjubpvhp astro-icon="tabler:bulb"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="icon-tabler"><path d="M3 12h1m8-9v1m8 8h1M5.6 5.6l.7.7m12.1-.7-.7.7M9 16a5 5 0 1 1 6 0 3.5 3.5 0 0 0-1 3 2 2 0 0 1-4 0 3.5 3.5 0 0 0-1-3M9.7 17h4.6"/></g></svg> </span> <span style="font-weight:500;; --light: #fbcfe8;--dark: #db2777;" data-astro-cid-fjubpvhp>Solution</span> </span> <span class="minmax" data-astro-cid-fjubpvhp style="--light: #fbcfe8;--dark: #db2777;"> <svg viewBox="0 0 24 24" data-astro-cid-fjubpvhp class="closed" astro-icon="tabler:arrows-maximize"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="icon-tabler"><path d="M16 4h4v4M14 10l6-6M8 20H4v-4M4 20l6-6M16 20h4v-4M14 14l6 6M8 4H4v4M4 4l6 6"/></g></svg> <svg viewBox="0 0 24 24" data-astro-cid-fjubpvhp class="open" astro-icon="tabler:arrows-minimize"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="icon-tabler"><path d="M5 9h4V5M3 3l6 6M5 15h4v4M3 21l6-6M19 9h-4V5M15 9l6-6M19 15h-4v4M15 15l6 6"/></g></svg> </span> </summary> <div class="content" data-astro-cid-fjubpvhp style="--light: #fbcfe8;--dark: #db2777;"> <div style="margin: 1rem;; --light: #fbcfe8;--dark: #db2777;" data-astro-cid-fjubpvhp> <p>The <code>random-maze.py</code> file is an (ASCII) text file that contains:</p><pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#E1E4E8">{</span></span>
<span class="line"><span style="color:#E1E4E8">    (</span><span style="color:#79B8FF">15</span><span style="color:#E1E4E8">, </span><span style="color:#79B8FF">21</span><span style="color:#E1E4E8">),</span></span>
<span class="line"><span style="color:#E1E4E8">    (</span><span style="color:#79B8FF">26</span><span style="color:#E1E4E8">, </span><span style="color:#79B8FF">21</span><span style="color:#E1E4E8">),</span></span>
<span class="line"><span style="color:#E1E4E8">    (</span><span style="color:#79B8FF">7</span><span style="color:#E1E4E8">, </span><span style="color:#79B8FF">17</span><span style="color:#E1E4E8">),</span></span>
<span class="line"><span style="color:#79B8FF">    ...</span></span>
<span class="line"><span style="color:#E1E4E8">    (</span><span style="color:#79B8FF">18</span><span style="color:#E1E4E8">, </span><span style="color:#79B8FF">8</span><span style="color:#E1E4E8">),</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span></code></pre><p>So to begin with, we can load this content as a string <code>random_maze_repr</code>:</p><pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#FFAB70">file</span><span style="color:#F97583"> =</span><span style="color:#79B8FF"> open</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">&quot;random-maze.py&quot;</span><span style="color:#E1E4E8">, </span><span style="color:#FFAB70">mode</span><span style="color:#F97583">=</span><span style="color:#9ECBFF">&quot;rt&quot;</span><span style="color:#E1E4E8">, </span><span style="color:#FFAB70">encoding</span><span style="color:#F97583">=</span><span style="color:#9ECBFF">&quot;ascii&quot;</span><span style="color:#E1E4E8">)</span></span>
<span class="line"><span style="color:#E1E4E8">random_maze_repr </span><span style="color:#F97583">=</span><span style="color:#FFAB70"> file</span><span style="color:#E1E4E8">.read()</span></span>
<span class="line"><span style="color:#FFAB70">file</span><span style="color:#E1E4E8">.close()</span></span></code></pre><p>This string contains a sequence of integer pairs which seem to represent
the integer coordinates of the empty maze cells.
So, we could probably analyze the contents line by line,
extract the coordinates, etc. For example, the following code
makes the job:</p><pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#E1E4E8">random_maze </span><span style="color:#F97583">=</span><span style="color:#79B8FF"> set</span><span style="color:#E1E4E8">()</span></span>
<span class="line"><span style="color:#F97583">for</span><span style="color:#E1E4E8"> line </span><span style="color:#F97583">in</span><span style="color:#E1E4E8"> random_maze_repr.splitlines():</span></span>
<span class="line"><span style="color:#E1E4E8">    line </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> line.strip()</span></span>
<span class="line"><span style="color:#F97583">    if</span><span style="color:#E1E4E8"> line </span><span style="color:#F97583">not</span><span style="color:#F97583"> in</span><span style="color:#E1E4E8"> (</span><span style="color:#9ECBFF">&quot;{&quot;</span><span style="color:#E1E4E8">, </span><span style="color:#9ECBFF">&quot;}&quot;</span><span style="color:#E1E4E8">, </span><span style="color:#9ECBFF">&quot;&quot;</span><span style="color:#E1E4E8">):</span></span>
<span class="line"><span style="color:#E1E4E8">        core </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> line[</span><span style="color:#79B8FF">1</span><span style="color:#E1E4E8">:</span><span style="color:#F97583">-</span><span style="color:#79B8FF">2</span><span style="color:#E1E4E8">]</span></span>
<span class="line"><span style="color:#E1E4E8">        x, y </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> core.split(</span><span style="color:#9ECBFF">&quot;,&quot;</span><span style="color:#E1E4E8">)</span></span>
<span class="line"><span style="color:#E1E4E8">        x, y </span><span style="color:#F97583">=</span><span style="color:#79B8FF"> int</span><span style="color:#E1E4E8">(x.strip()), </span><span style="color:#79B8FF">int</span><span style="color:#E1E4E8">(y.strip())</span></span>
<span class="line"><span style="color:#E1E4E8">        random_maze.add((x, y))</span></span></code></pre><p>But we can also notice that the string format is exactly the
representation that Python uses for sets of pairs of integers.
In this case, that means that we can simply <code>eval</code> the string
instead:</p><pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#E1E4E8">random_maze </span><span style="color:#F97583">=</span><span style="color:#79B8FF"> eval</span><span style="color:#E1E4E8">(maze_repr)</span></span></code></pre><p>Additionally, this solution would work even if the file format
had a more compact representation where there are several coordinates
on the same line.</p><p>Finally, after a bit of clean-up, our integrated solution would be:</p><pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#F97583">def</span><span style="color:#B392F0"> load_maze</span><span style="color:#E1E4E8">(filename):</span></span>
<span class="line"><span style="color:#FFAB70">    file</span><span style="color:#F97583"> =</span><span style="color:#79B8FF"> open</span><span style="color:#E1E4E8">(filename, </span><span style="color:#FFAB70">mode</span><span style="color:#F97583">=</span><span style="color:#9ECBFF">&quot;rt&quot;</span><span style="color:#E1E4E8">, </span><span style="color:#FFAB70">encoding</span><span style="color:#F97583">=</span><span style="color:#9ECBFF">&quot;ascii&quot;</span><span style="color:#E1E4E8">)</span></span>
<span class="line"><span style="color:#E1E4E8">    maze_repr </span><span style="color:#F97583">=</span><span style="color:#FFAB70"> file</span><span style="color:#E1E4E8">.read()</span></span>
<span class="line"><span style="color:#FFAB70">    file</span><span style="color:#E1E4E8">.close()</span></span>
<span class="line"><span style="color:#E1E4E8">    maze </span><span style="color:#F97583">=</span><span style="color:#79B8FF"> eval</span><span style="color:#E1E4E8">(maze_repr)</span></span>
<span class="line"><span style="color:#F97583">    return</span><span style="color:#E1E4E8"> maze</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">random_maze </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> load_maze(</span><span style="color:#9ECBFF">&quot;random-maze.py&quot;</span><span style="color:#E1E4E8">)</span></span></code></pre> </div> </div> </details> </aside>   
<h3 id="visualization">Visualization</h3>
<p>Develop a function <code>draw_maze</code> to display a maze.
This function should work in the following context:</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#F97583">import</span><span style="color:#E1E4E8"> pyxel</span></span>
<span class="line"></span>
<span class="line"><span style="color:#79B8FF">WIDTH</span><span style="color:#F97583"> =</span><span style="color:#79B8FF"> 30</span></span>
<span class="line"><span style="color:#79B8FF">HEIGHT</span><span style="color:#F97583"> =</span><span style="color:#79B8FF"> 30</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">random_maze </span><span style="color:#F97583">=</span><span style="color:#79B8FF"> ...</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">pyxel.init(</span><span style="color:#79B8FF">WIDTH</span><span style="color:#E1E4E8">, </span><span style="color:#79B8FF">HEIGHT</span><span style="color:#E1E4E8">)</span></span>
<span class="line"><span style="color:#E1E4E8">draw_maze(random_maze)</span></span>
<span class="line"><span style="color:#E1E4E8">pyxel.show()</span></span></code></pre>
<aside data-astro-cid-fjubpvhp style="--light: #fbcfe8;--dark: #db2777;"> <details class="" data-astro-cid-fjubpvhp style="--light: #fbcfe8;--dark: #db2777;"> <summary style="display:flex;align-items:center;justify-content:space-between;; --light: #fbcfe8;--dark: #db2777;" data-astro-cid-fjubpvhp> <span style="display:flex;gap:0.5em;align-items:center;; --light: #fbcfe8;--dark: #db2777;" data-astro-cid-fjubpvhp> <span class="circle" data-astro-cid-fjubpvhp style="--light: #fbcfe8;--dark: #db2777;"> <svg viewBox="0 0 24 24" data-astro-cid-fjubpvhp astro-icon="tabler:bulb"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="icon-tabler"><path d="M3 12h1m8-9v1m8 8h1M5.6 5.6l.7.7m12.1-.7-.7.7M9 16a5 5 0 1 1 6 0 3.5 3.5 0 0 0-1 3 2 2 0 0 1-4 0 3.5 3.5 0 0 0-1-3M9.7 17h4.6"/></g></svg> </span> <span style="font-weight:500;; --light: #fbcfe8;--dark: #db2777;" data-astro-cid-fjubpvhp>Solution</span> </span> <span class="minmax" data-astro-cid-fjubpvhp style="--light: #fbcfe8;--dark: #db2777;"> <svg viewBox="0 0 24 24" data-astro-cid-fjubpvhp class="closed" astro-icon="tabler:arrows-maximize"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="icon-tabler"><path d="M16 4h4v4M14 10l6-6M8 20H4v-4M4 20l6-6M16 20h4v-4M14 14l6 6M8 4H4v4M4 4l6 6"/></g></svg> <svg viewBox="0 0 24 24" data-astro-cid-fjubpvhp class="open" astro-icon="tabler:arrows-minimize"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="icon-tabler"><path d="M5 9h4V5M3 3l6 6M5 15h4v4M3 21l6-6M19 9h-4V5M15 9l6-6M19 15h-4v4M15 15l6 6"/></g></svg> </span> </summary> <div class="content" data-astro-cid-fjubpvhp style="--light: #fbcfe8;--dark: #db2777;"> <div style="margin: 1rem;; --light: #fbcfe8;--dark: #db2777;" data-astro-cid-fjubpvhp> <pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#79B8FF">BLACK</span><span style="color:#F97583"> =</span><span style="color:#79B8FF"> 0</span></span>
<span class="line"><span style="color:#79B8FF">WHITE</span><span style="color:#F97583"> =</span><span style="color:#79B8FF"> 7</span><span style="color:#6A737D">  # ℹ️ light grey tbh</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">def</span><span style="color:#B392F0"> display</span><span style="color:#E1E4E8">(color, pixels</span><span style="color:#F97583">=</span><span style="color:#79B8FF">None</span><span style="color:#E1E4E8">):</span></span>
<span class="line"><span style="color:#F97583">    if</span><span style="color:#E1E4E8"> pixels </span><span style="color:#F97583">is</span><span style="color:#79B8FF"> None</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#E1E4E8">        pyxel.cls(color)</span></span>
<span class="line"><span style="color:#F97583">    elif</span><span style="color:#79B8FF"> len</span><span style="color:#E1E4E8">(pixels) </span><span style="color:#F97583">&gt;=</span><span style="color:#79B8FF"> 1</span><span style="color:#F97583"> and</span><span style="color:#79B8FF"> type</span><span style="color:#E1E4E8">(pixels[</span><span style="color:#79B8FF">0</span><span style="color:#E1E4E8">]) </span><span style="color:#F97583">==</span><span style="color:#79B8FF"> int</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#E1E4E8">        display(color, [pixels])</span></span>
<span class="line"><span style="color:#F97583">    else</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#F97583">        for</span><span style="color:#E1E4E8"> x, y </span><span style="color:#F97583">in</span><span style="color:#E1E4E8"> pixels:</span></span>
<span class="line"><span style="color:#E1E4E8">            pyxel.pset(x, y, color)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">def</span><span style="color:#B392F0"> draw_maze</span><span style="color:#E1E4E8">(maze):</span></span>
<span class="line"><span style="color:#E1E4E8">    display(</span><span style="color:#79B8FF">BLACK</span><span style="color:#E1E4E8">)</span></span>
<span class="line"><span style="color:#E1E4E8">    display(</span><span style="color:#79B8FF">WHITE</span><span style="color:#E1E4E8">, maze)</span></span></code></pre> </div> </div> </details> </aside>   
<h3 id="create-your-own-maze">Create your own maze</h3>
<p>Design your own 30x30 maze, for example the empty maze,
a spiral, etc.</p>
<aside data-astro-cid-fjubpvhp style="--light: #fbcfe8;--dark: #db2777;"> <details class="" data-astro-cid-fjubpvhp style="--light: #fbcfe8;--dark: #db2777;"> <summary style="display:flex;align-items:center;justify-content:space-between;; --light: #fbcfe8;--dark: #db2777;" data-astro-cid-fjubpvhp> <span style="display:flex;gap:0.5em;align-items:center;; --light: #fbcfe8;--dark: #db2777;" data-astro-cid-fjubpvhp> <span class="circle" data-astro-cid-fjubpvhp style="--light: #fbcfe8;--dark: #db2777;"> <svg viewBox="0 0 24 24" data-astro-cid-fjubpvhp astro-icon="tabler:bulb"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="icon-tabler"><path d="M3 12h1m8-9v1m8 8h1M5.6 5.6l.7.7m12.1-.7-.7.7M9 16a5 5 0 1 1 6 0 3.5 3.5 0 0 0-1 3 2 2 0 0 1-4 0 3.5 3.5 0 0 0-1-3M9.7 17h4.6"/></g></svg> </span> <span style="font-weight:500;; --light: #fbcfe8;--dark: #db2777;" data-astro-cid-fjubpvhp>Solution</span> </span> <span class="minmax" data-astro-cid-fjubpvhp style="--light: #fbcfe8;--dark: #db2777;"> <svg viewBox="0 0 24 24" data-astro-cid-fjubpvhp class="closed" astro-icon="tabler:arrows-maximize"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="icon-tabler"><path d="M16 4h4v4M14 10l6-6M8 20H4v-4M4 20l6-6M16 20h4v-4M14 14l6 6M8 4H4v4M4 4l6 6"/></g></svg> <svg viewBox="0 0 24 24" data-astro-cid-fjubpvhp class="open" astro-icon="tabler:arrows-minimize"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="icon-tabler"><path d="M5 9h4V5M3 3l6 6M5 15h4v4M3 21l6-6M19 9h-4V5M15 9l6-6M19 15h-4v4M15 15l6 6"/></g></svg> </span> </summary> <div class="content" data-astro-cid-fjubpvhp style="--light: #fbcfe8;--dark: #db2777;"> <div style="margin: 1rem;; --light: #fbcfe8;--dark: #db2777;" data-astro-cid-fjubpvhp> <p>For example to create a maze without walls:</p><pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#E1E4E8">empty_maze </span><span style="color:#F97583">=</span><span style="color:#79B8FF"> set</span><span style="color:#E1E4E8">()</span></span>
<span class="line"><span style="color:#F97583">for</span><span style="color:#E1E4E8"> y </span><span style="color:#F97583">in</span><span style="color:#79B8FF"> range</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">0</span><span style="color:#E1E4E8">, </span><span style="color:#79B8FF">HEIGHT</span><span style="color:#E1E4E8">):</span></span>
<span class="line"><span style="color:#F97583">    for</span><span style="color:#E1E4E8"> x </span><span style="color:#F97583">in</span><span style="color:#79B8FF"> range</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">0</span><span style="color:#E1E4E8">, </span><span style="color:#79B8FF">WIDTH</span><span style="color:#E1E4E8">):</span></span>
<span class="line"><span style="color:#E1E4E8">        empty_maze.add((x, y))</span></span></code></pre> </div> </div> </details> </aside>   
<h2 id="graphs-and-paths">Graphs and Paths</h2>
<aside data-astro-cid-fjubpvhp style="--light: #ccfbf1;--dark: #0d9488;"> <details open class="" data-astro-cid-fjubpvhp style="--light: #ccfbf1;--dark: #0d9488;"> <summary style="display:flex;align-items:center;justify-content:space-between;; --light: #ccfbf1;--dark: #0d9488;" data-astro-cid-fjubpvhp> <span style="display:flex;gap:0.5em;align-items:center;; --light: #ccfbf1;--dark: #0d9488;" data-astro-cid-fjubpvhp> <span class="circle" data-astro-cid-fjubpvhp style="--light: #ccfbf1;--dark: #0d9488;"> <svg viewBox="0 0 24 24" data-astro-cid-fjubpvhp astro-icon="tabler:tag"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="icon-tabler"><circle cx="8.5" cy="8.5" r="1" fill="currentColor"/><path d="M4 7v3.859c0 .537.213 1.052.593 1.432l8.116 8.116a2.025 2.025 0 0 0 2.864 0l4.834-4.834a2.025 2.025 0 0 0 0-2.864L12.29 4.593A2.025 2.025 0 0 0 10.859 4H7a3 3 0 0 0-3 3z"/></g></svg> </span> <span style="font-weight:500;; --light: #ccfbf1;--dark: #0d9488;" data-astro-cid-fjubpvhp>Graph &amp; Vertices, Edges, Weights</span> </span> <span class="minmax" data-astro-cid-fjubpvhp style="--light: #ccfbf1;--dark: #0d9488;"> <svg viewBox="0 0 24 24" data-astro-cid-fjubpvhp class="closed" astro-icon="tabler:arrows-maximize"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="icon-tabler"><path d="M16 4h4v4M14 10l6-6M8 20H4v-4M4 20l6-6M16 20h4v-4M14 14l6 6M8 4H4v4M4 4l6 6"/></g></svg> <svg viewBox="0 0 24 24" data-astro-cid-fjubpvhp class="open" astro-icon="tabler:arrows-minimize"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="icon-tabler"><path d="M5 9h4V5M3 3l6 6M5 15h4v4M3 21l6-6M19 9h-4V5M15 9l6-6M19 15h-4v4M15 15l6 6"/></g></svg> </span> </summary> <div class="content" data-astro-cid-fjubpvhp style="--light: #ccfbf1;--dark: #0d9488;"> <div style="margin: 1rem;; --light: #ccfbf1;--dark: #0d9488;" data-astro-cid-fjubpvhp> <p>An (oriented and weighted) <strong>graph</strong>  is a triplet composed of:</p><ul>
<li>
<p>a set of <strong>vertices</strong> (or <strong>nodes</strong>),</p>
</li>
<li>
<p>a set of (oriented) <strong>edges</strong> (or <strong>arcs</strong>), where
an oriented <strong>edge</strong> is a pair composed of a source vertex and a target vertex.</p>
</li>
<li>
<p>a collection associating to each edge a numerical value called <strong>weight</strong>.</p>
</li>
</ul> </div> </div> </details> </aside>   
<aside data-astro-cid-fjubpvhp style="--light: #ccfbf1;--dark: #0d9488;"> <details open class="" data-astro-cid-fjubpvhp style="--light: #ccfbf1;--dark: #0d9488;"> <summary style="display:flex;align-items:center;justify-content:space-between;; --light: #ccfbf1;--dark: #0d9488;" data-astro-cid-fjubpvhp> <span style="display:flex;gap:0.5em;align-items:center;; --light: #ccfbf1;--dark: #0d9488;" data-astro-cid-fjubpvhp> <span class="circle" data-astro-cid-fjubpvhp style="--light: #ccfbf1;--dark: #0d9488;"> <svg viewBox="0 0 24 24" data-astro-cid-fjubpvhp astro-icon="tabler:tag"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="icon-tabler"><circle cx="8.5" cy="8.5" r="1" fill="currentColor"/><path d="M4 7v3.859c0 .537.213 1.052.593 1.432l8.116 8.116a2.025 2.025 0 0 0 2.864 0l4.834-4.834a2.025 2.025 0 0 0 0-2.864L12.29 4.593A2.025 2.025 0 0 0 10.859 4H7a3 3 0 0 0-3 3z"/></g></svg> </span> <span style="font-weight:500;; --light: #ccfbf1;--dark: #0d9488;" data-astro-cid-fjubpvhp>Path</span> </span> <span class="minmax" data-astro-cid-fjubpvhp style="--light: #ccfbf1;--dark: #0d9488;"> <svg viewBox="0 0 24 24" data-astro-cid-fjubpvhp class="closed" astro-icon="tabler:arrows-maximize"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="icon-tabler"><path d="M16 4h4v4M14 10l6-6M8 20H4v-4M4 20l6-6M16 20h4v-4M14 14l6 6M8 4H4v4M4 4l6 6"/></g></svg> <svg viewBox="0 0 24 24" data-astro-cid-fjubpvhp class="open" astro-icon="tabler:arrows-minimize"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="icon-tabler"><path d="M5 9h4V5M3 3l6 6M5 15h4v4M3 21l6-6M19 9h-4V5M15 9l6-6M19 15h-4v4M15 15l6 6"/></g></svg> </span> </summary> <div class="content" data-astro-cid-fjubpvhp style="--light: #ccfbf1;--dark: #0d9488;"> <div style="margin: 1rem;; --light: #ccfbf1;--dark: #0d9488;" data-astro-cid-fjubpvhp> <p>A <strong>path</strong> in a graph is a sequence of vertices such that
each element of the sequence and its successor form an edge of the graph.
A path is said to <strong>join</strong> its first vertex to its last vertex.</p> </div> </div> </details> </aside>   
<h3 id="mazes-and-graphs">Mazes and Graphs</h3>
<p>For each maze we define a graph</p>
<ul>
<li>
<p>whose vertices are the empty cells of the maze,</p>
</li>
<li>
<p>whose edges represent the admissible movements from one cell to a neighboring cell
(the two cells are empty and share a side),</p>
</li>
<li>
<p>for which the weight of each edge is 1; it represents the number of
elementary actions (or “cost”) needed to move from one cell to a
neighboring cell.</p>
</li>
</ul>
<p>Given this definition</p>
<ul>
<li>
<p>What Python data structure would we naturally use
to represent these graphs?</p>
</li>
<li>
<p>Implement a function <code>maze_to_graph</code> which builds
the graph associated to a maze.</p>
</li>
</ul>
<aside data-astro-cid-fjubpvhp style="--light: #ffedd5;--dark: #ea580c;"> <details class="" data-astro-cid-fjubpvhp style="--light: #ffedd5;--dark: #ea580c;"> <summary style="display:flex;align-items:center;justify-content:space-between;; --light: #ffedd5;--dark: #ea580c;" data-astro-cid-fjubpvhp> <span style="display:flex;gap:0.5em;align-items:center;; --light: #ffedd5;--dark: #ea580c;" data-astro-cid-fjubpvhp> <span class="circle" data-astro-cid-fjubpvhp style="--light: #ffedd5;--dark: #ea580c;"> <svg viewBox="0 0 24 24" data-astro-cid-fjubpvhp astro-icon="tabler:alert-triangle"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="icon-tabler"><path d="M12 9v2m0 4v.01M5 19h14a2 2 0 0 0 1.84-2.75L13.74 4a2 2 0 0 0-3.5 0l-7.1 12.25A2 2 0 0 0 4.89 19"/></g></svg> </span> <span style="font-weight:500;; --light: #ffedd5;--dark: #ea580c;" data-astro-cid-fjubpvhp>Premature optimization is the root of all evil</span> </span> <span class="minmax" data-astro-cid-fjubpvhp style="--light: #ffedd5;--dark: #ea580c;"> <svg viewBox="0 0 24 24" data-astro-cid-fjubpvhp class="closed" astro-icon="tabler:arrows-maximize"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="icon-tabler"><path d="M16 4h4v4M14 10l6-6M8 20H4v-4M4 20l6-6M16 20h4v-4M14 14l6 6M8 4H4v4M4 4l6 6"/></g></svg> <svg viewBox="0 0 24 24" data-astro-cid-fjubpvhp class="open" astro-icon="tabler:arrows-minimize"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="icon-tabler"><path d="M5 9h4V5M3 3l6 6M5 15h4v4M3 21l6-6M19 9h-4V5M15 9l6-6M19 15h-4v4M15 15l6 6"/></g></svg> </span> </summary> <div class="content" data-astro-cid-fjubpvhp style="--light: #ffedd5;--dark: #ea580c;"> <div style="margin: 1rem;; --light: #ffedd5;--dark: #ea580c;" data-astro-cid-fjubpvhp> <p>At this stage, we are <strong>not</strong> looking here for the most compact or efficient
structure but to translate as literally as possible the mathematical description
of the graph.</p> </div> </div> </details> </aside>   
<aside data-astro-cid-fjubpvhp style="--light: #fbcfe8;--dark: #db2777;"> <details class="" data-astro-cid-fjubpvhp style="--light: #fbcfe8;--dark: #db2777;"> <summary style="display:flex;align-items:center;justify-content:space-between;; --light: #fbcfe8;--dark: #db2777;" data-astro-cid-fjubpvhp> <span style="display:flex;gap:0.5em;align-items:center;; --light: #fbcfe8;--dark: #db2777;" data-astro-cid-fjubpvhp> <span class="circle" data-astro-cid-fjubpvhp style="--light: #fbcfe8;--dark: #db2777;"> <svg viewBox="0 0 24 24" data-astro-cid-fjubpvhp astro-icon="tabler:bulb"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="icon-tabler"><path d="M3 12h1m8-9v1m8 8h1M5.6 5.6l.7.7m12.1-.7-.7.7M9 16a5 5 0 1 1 6 0 3.5 3.5 0 0 0-1 3 2 2 0 0 1-4 0 3.5 3.5 0 0 0-1-3M9.7 17h4.6"/></g></svg> </span> <span style="font-weight:500;; --light: #fbcfe8;--dark: #db2777;" data-astro-cid-fjubpvhp>Solution</span> </span> <span class="minmax" data-astro-cid-fjubpvhp style="--light: #fbcfe8;--dark: #db2777;"> <svg viewBox="0 0 24 24" data-astro-cid-fjubpvhp class="closed" astro-icon="tabler:arrows-maximize"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="icon-tabler"><path d="M16 4h4v4M14 10l6-6M8 20H4v-4M4 20l6-6M16 20h4v-4M14 14l6 6M8 4H4v4M4 4l6 6"/></g></svg> <svg viewBox="0 0 24 24" data-astro-cid-fjubpvhp class="open" astro-icon="tabler:arrows-minimize"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="icon-tabler"><path d="M5 9h4V5M3 3l6 6M5 15h4v4M3 21l6-6M19 9h-4V5M15 9l6-6M19 15h-4v4M15 15l6 6"/></g></svg> </span> </summary> <div class="content" data-astro-cid-fjubpvhp style="--light: #fbcfe8;--dark: #db2777;"> <div style="margin: 1rem;; --light: #fbcfe8;--dark: #db2777;" data-astro-cid-fjubpvhp> <p>It seems natural to represent the vertices as a set of pairs of integers,
the edges as a set of pairs of vertices and the weights as a dictionary having
as keys the edges and as unique value the integer 1.</p><pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#79B8FF">UP</span><span style="color:#E1E4E8">, </span><span style="color:#79B8FF">RIGHT</span><span style="color:#E1E4E8">, </span><span style="color:#79B8FF">DOWN</span><span style="color:#E1E4E8">, </span><span style="color:#79B8FF">LEFT</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> (</span><span style="color:#79B8FF">0</span><span style="color:#E1E4E8">, </span><span style="color:#F97583">-</span><span style="color:#79B8FF">1</span><span style="color:#E1E4E8">), (</span><span style="color:#79B8FF">1</span><span style="color:#E1E4E8">, </span><span style="color:#79B8FF">0</span><span style="color:#E1E4E8">), (</span><span style="color:#79B8FF">0</span><span style="color:#E1E4E8">, </span><span style="color:#79B8FF">1</span><span style="color:#E1E4E8">), (</span><span style="color:#F97583">-</span><span style="color:#79B8FF">1</span><span style="color:#E1E4E8">, </span><span style="color:#79B8FF">0</span><span style="color:#E1E4E8">) </span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">def</span><span style="color:#B392F0"> maze_to_graph</span><span style="color:#E1E4E8">(maze):</span></span>
<span class="line"><span style="color:#E1E4E8">    vertices </span><span style="color:#F97583">=</span><span style="color:#79B8FF"> set</span><span style="color:#E1E4E8">(maze)</span></span>
<span class="line"><span style="color:#E1E4E8">    edges </span><span style="color:#F97583">=</span><span style="color:#79B8FF"> set</span><span style="color:#E1E4E8">()</span></span>
<span class="line"><span style="color:#E1E4E8">    weights </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> {}</span></span>
<span class="line"><span style="color:#F97583">    for</span><span style="color:#E1E4E8"> vertex </span><span style="color:#F97583">in</span><span style="color:#E1E4E8"> vertices:</span></span>
<span class="line"><span style="color:#E1E4E8">        x, y </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> vertex</span></span>
<span class="line"><span style="color:#F97583">        for</span><span style="color:#E1E4E8"> (dx, dy) </span><span style="color:#F97583">in</span><span style="color:#E1E4E8"> [</span><span style="color:#79B8FF">UP</span><span style="color:#E1E4E8">, </span><span style="color:#79B8FF">RIGHT</span><span style="color:#E1E4E8">, </span><span style="color:#79B8FF">DOWN</span><span style="color:#E1E4E8">, </span><span style="color:#79B8FF">LEFT</span><span style="color:#E1E4E8">]:</span></span>
<span class="line"><span style="color:#E1E4E8">            neighbor </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> (x </span><span style="color:#F97583">+</span><span style="color:#E1E4E8"> dx, y </span><span style="color:#F97583">+</span><span style="color:#E1E4E8"> dy)</span></span>
<span class="line"><span style="color:#F97583">            if</span><span style="color:#E1E4E8"> neighbor </span><span style="color:#F97583">in</span><span style="color:#E1E4E8"> vertices:</span></span>
<span class="line"><span style="color:#E1E4E8">                edge </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> (vertex, neighbor)</span></span>
<span class="line"><span style="color:#E1E4E8">                edges.add(edge)</span></span>
<span class="line"><span style="color:#E1E4E8">                weights[edge] </span><span style="color:#F97583">=</span><span style="color:#79B8FF"> 1</span></span>
<span class="line"><span style="color:#F97583">    return</span><span style="color:#E1E4E8"> (vertices, edges, weights)</span></span></code></pre> </div> </div> </details> </aside>   
<h3 id="reachable-cells">Reachable Cells</h3>
<p>Implement a function <code>reachable_cells</code> which returns the set
of cells of a maze which are reachable from
the cell <code>source</code>.</p>
<figure><video style="width:100%;margin-left:0; margin-right:0;" controls><source src="../reachable.webm" type="video/webm"/></video><figcaption><p>Computation of the cells reachable from the top-left corner.
The green cells are reachable cells whose neighbors
have between inspected; orange cells are reachable,
but their neighbors have not yet been inspected;
Two groups of empty cells stay white until the end,
and hence are unreachable.</p></figcaption></figure>
<aside data-astro-cid-fjubpvhp style="--light: #fbcfe8;--dark: #db2777;"> <details class="" data-astro-cid-fjubpvhp style="--light: #fbcfe8;--dark: #db2777;"> <summary style="display:flex;align-items:center;justify-content:space-between;; --light: #fbcfe8;--dark: #db2777;" data-astro-cid-fjubpvhp> <span style="display:flex;gap:0.5em;align-items:center;; --light: #fbcfe8;--dark: #db2777;" data-astro-cid-fjubpvhp> <span class="circle" data-astro-cid-fjubpvhp style="--light: #fbcfe8;--dark: #db2777;"> <svg viewBox="0 0 24 24" data-astro-cid-fjubpvhp astro-icon="tabler:bulb"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="icon-tabler"><path d="M3 12h1m8-9v1m8 8h1M5.6 5.6l.7.7m12.1-.7-.7.7M9 16a5 5 0 1 1 6 0 3.5 3.5 0 0 0-1 3 2 2 0 0 1-4 0 3.5 3.5 0 0 0-1-3M9.7 17h4.6"/></g></svg> </span> <span style="font-weight:500;; --light: #fbcfe8;--dark: #db2777;" data-astro-cid-fjubpvhp>Solution</span> </span> <span class="minmax" data-astro-cid-fjubpvhp style="--light: #fbcfe8;--dark: #db2777;"> <svg viewBox="0 0 24 24" data-astro-cid-fjubpvhp class="closed" astro-icon="tabler:arrows-maximize"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="icon-tabler"><path d="M16 4h4v4M14 10l6-6M8 20H4v-4M4 20l6-6M16 20h4v-4M14 14l6 6M8 4H4v4M4 4l6 6"/></g></svg> <svg viewBox="0 0 24 24" data-astro-cid-fjubpvhp class="open" astro-icon="tabler:arrows-minimize"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="icon-tabler"><path d="M5 9h4V5M3 3l6 6M5 15h4v4M3 21l6-6M19 9h-4V5M15 9l6-6M19 15h-4v4M15 15l6 6"/></g></svg> </span> </summary> <div class="content" data-astro-cid-fjubpvhp style="--light: #fbcfe8;--dark: #db2777;"> <div style="margin: 1rem;; --light: #fbcfe8;--dark: #db2777;" data-astro-cid-fjubpvhp> <pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#F97583">def</span><span style="color:#B392F0"> reachable_cells</span><span style="color:#E1E4E8">(maze, source):</span></span>
<span class="line"><span style="color:#E1E4E8">    vertices, edges, _ </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> maze_to_graph(maze)</span></span>
<span class="line"><span style="color:#E1E4E8">    todo </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> {source}</span></span>
<span class="line"><span style="color:#E1E4E8">    done </span><span style="color:#F97583">=</span><span style="color:#79B8FF"> set</span><span style="color:#E1E4E8">()</span></span>
<span class="line"><span style="color:#F97583">    while</span><span style="color:#E1E4E8"> todo:</span></span>
<span class="line"><span style="color:#E1E4E8">        current </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> todo.pop()</span></span>
<span class="line"><span style="color:#E1E4E8">        neighbors </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#E1E4E8">            v </span><span style="color:#F97583">for</span><span style="color:#E1E4E8"> v </span><span style="color:#F97583">in</span><span style="color:#E1E4E8"> vertices </span></span>
<span class="line"><span style="color:#F97583">            if</span><span style="color:#E1E4E8"> (current, v) </span><span style="color:#F97583">in</span><span style="color:#E1E4E8"> edges</span></span>
<span class="line"><span style="color:#E1E4E8">        }</span></span>
<span class="line"><span style="color:#F97583">        for</span><span style="color:#E1E4E8"> n </span><span style="color:#F97583">in</span><span style="color:#E1E4E8"> neighbors:</span></span>
<span class="line"><span style="color:#F97583">            if</span><span style="color:#E1E4E8"> n </span><span style="color:#F97583">not</span><span style="color:#F97583"> in</span><span style="color:#E1E4E8"> done:</span></span>
<span class="line"><span style="color:#E1E4E8">                todo.add(n)</span></span>
<span class="line"><span style="color:#E1E4E8">        done.add(current)</span></span>
<span class="line"><span style="color:#F97583">    return</span><span style="color:#E1E4E8"> done</span></span></code></pre> </div> </div> </details> </aside>   
<p>Extend the function <code>draw_maze</code> to graphically differentiate
a set of cells using a given color.
Then use it to represent the set
of cells reachable from the top left corner of the maze
<code>random_maze</code>.</p>
<aside data-astro-cid-fjubpvhp style="--light: #fbcfe8;--dark: #db2777;"> <details class="" data-astro-cid-fjubpvhp style="--light: #fbcfe8;--dark: #db2777;"> <summary style="display:flex;align-items:center;justify-content:space-between;; --light: #fbcfe8;--dark: #db2777;" data-astro-cid-fjubpvhp> <span style="display:flex;gap:0.5em;align-items:center;; --light: #fbcfe8;--dark: #db2777;" data-astro-cid-fjubpvhp> <span class="circle" data-astro-cid-fjubpvhp style="--light: #fbcfe8;--dark: #db2777;"> <svg viewBox="0 0 24 24" data-astro-cid-fjubpvhp astro-icon="tabler:bulb"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="icon-tabler"><path d="M3 12h1m8-9v1m8 8h1M5.6 5.6l.7.7m12.1-.7-.7.7M9 16a5 5 0 1 1 6 0 3.5 3.5 0 0 0-1 3 2 2 0 0 1-4 0 3.5 3.5 0 0 0-1-3M9.7 17h4.6"/></g></svg> </span> <span style="font-weight:500;; --light: #fbcfe8;--dark: #db2777;" data-astro-cid-fjubpvhp>Solution</span> </span> <span class="minmax" data-astro-cid-fjubpvhp style="--light: #fbcfe8;--dark: #db2777;"> <svg viewBox="0 0 24 24" data-astro-cid-fjubpvhp class="closed" astro-icon="tabler:arrows-maximize"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="icon-tabler"><path d="M16 4h4v4M14 10l6-6M8 20H4v-4M4 20l6-6M16 20h4v-4M14 14l6 6M8 4H4v4M4 4l6 6"/></g></svg> <svg viewBox="0 0 24 24" data-astro-cid-fjubpvhp class="open" astro-icon="tabler:arrows-minimize"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="icon-tabler"><path d="M5 9h4V5M3 3l6 6M5 15h4v4M3 21l6-6M19 9h-4V5M15 9l6-6M19 15h-4v4M15 15l6 6"/></g></svg> </span> </summary> <div class="content" data-astro-cid-fjubpvhp style="--light: #fbcfe8;--dark: #db2777;"> <div style="margin: 1rem;; --light: #fbcfe8;--dark: #db2777;" data-astro-cid-fjubpvhp> <pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#79B8FF">LIGHT_GREEN</span><span style="color:#F97583"> =</span><span style="color:#79B8FF"> 11</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">def</span><span style="color:#B392F0"> draw_maze</span><span style="color:#E1E4E8">(maze, cells</span><span style="color:#F97583">=</span><span style="color:#79B8FF">None</span><span style="color:#E1E4E8">):</span></span>
<span class="line"><span style="color:#E1E4E8">    display(</span><span style="color:#79B8FF">BLACK</span><span style="color:#E1E4E8">)</span></span>
<span class="line"><span style="color:#E1E4E8">    display(maze, </span><span style="color:#79B8FF">WHITE</span><span style="color:#E1E4E8">, maze)</span></span>
<span class="line"><span style="color:#F97583">    if</span><span style="color:#E1E4E8"> cells </span><span style="color:#F97583">is</span><span style="color:#F97583"> not</span><span style="color:#79B8FF"> None</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#E1E4E8">        display(cells, </span><span style="color:#79B8FF">LIGHT_GREEN</span><span style="color:#E1E4E8">)</span></span></code></pre><pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#79B8FF">TOP_LEFT</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> (</span><span style="color:#79B8FF">0</span><span style="color:#E1E4E8">, </span><span style="color:#79B8FF">0</span><span style="color:#E1E4E8">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">cells </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> reachable_cells(random_maze, </span><span style="color:#FFAB70">source</span><span style="color:#F97583">=</span><span style="color:#79B8FF">TOP_LEFT</span><span style="color:#E1E4E8">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">pyxel.init(</span><span style="color:#79B8FF">WIDTH</span><span style="color:#E1E4E8">, </span><span style="color:#79B8FF">HEIGHT</span><span style="color:#E1E4E8">)</span></span>
<span class="line"><span style="color:#E1E4E8">draw_maze(</span><span style="color:#FFAB70">maze</span><span style="color:#F97583">=</span><span style="color:#E1E4E8">random_maze, </span><span style="color:#FFAB70">cells</span><span style="color:#F97583">=</span><span style="color:#E1E4E8">cells)</span></span>
<span class="line"><span style="color:#E1E4E8">pyxel.show()</span></span></code></pre> </div> </div> </details> </aside>   
<h3 id="mazes-and-paths">Mazes and Paths</h3>
<aside data-astro-cid-fjubpvhp style="--light: #cbd5e1;--dark: #334155;"> <details open class="" data-astro-cid-fjubpvhp style="--light: #cbd5e1;--dark: #334155;"> <summary style="display:flex;align-items:center;justify-content:space-between;; --light: #cbd5e1;--dark: #334155;" data-astro-cid-fjubpvhp> <span style="display:flex;gap:0.5em;align-items:center;; --light: #cbd5e1;--dark: #334155;" data-astro-cid-fjubpvhp> <span class="circle" data-astro-cid-fjubpvhp style="--light: #cbd5e1;--dark: #334155;"> <svg fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" data-astro-cid-fjubpvhp astro-icon="checklist"><path stroke="none" d="M0 0h24v24H0z"/><path d="M9.615 20H7a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v8M14 19l2 2 4-4M9 8h4M9 12h2"/></svg> </span> <span style="font-weight:500;; --light: #cbd5e1;--dark: #334155;" data-astro-cid-fjubpvhp>Task</span> </span> <span class="minmax" data-astro-cid-fjubpvhp style="--light: #cbd5e1;--dark: #334155;"> <svg viewBox="0 0 24 24" data-astro-cid-fjubpvhp class="closed" astro-icon="tabler:arrows-maximize"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="icon-tabler"><path d="M16 4h4v4M14 10l6-6M8 20H4v-4M4 20l6-6M16 20h4v-4M14 14l6 6M8 4H4v4M4 4l6 6"/></g></svg> <svg viewBox="0 0 24 24" data-astro-cid-fjubpvhp class="open" astro-icon="tabler:arrows-minimize"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="icon-tabler"><path d="M5 9h4V5M3 3l6 6M5 15h4v4M3 21l6-6M19 9h-4V5M15 9l6-6M19 15h-4v4M15 15l6 6"/></g></svg> </span> </summary> <div class="content" data-astro-cid-fjubpvhp style="--light: #cbd5e1;--dark: #334155;"> <div style="margin: 1rem;; --light: #cbd5e1;--dark: #334155;" data-astro-cid-fjubpvhp> <p>Implement a function <code>path_from</code> which takes as arguments:</p><ul>
<li>
<p><code>maze</code>: a 30x30 maze,</p>
</li>
<li>
<p><code>source</code>: a source cell,</p>
</li>
</ul><p>and returns</p><ul>
<li><code>path</code>: a dictionary whose keys are cells and
whose values are paths.</li>
</ul><p>The path <code>path[target]</code> must join <code>source</code> and <code>target</code> if <code>target</code> is reachable
from <code>source</code>; otherwise, <code>target</code> must not be a key of the dictionary.</p> </div> </div> </details> </aside>   
<figure><video style="width:100%;margin-left:0; margin-right:0;" controls><source src="../maze-path.webm" type="video/webm"/></video><figcaption><p>Computation of the cells reachable from the top-left corner,
together with the path effectively used to joing them (in pink).</p></figcaption></figure>
<aside data-astro-cid-fjubpvhp style="--light: #fbcfe8;--dark: #db2777;"> <details class="" data-astro-cid-fjubpvhp style="--light: #fbcfe8;--dark: #db2777;"> <summary style="display:flex;align-items:center;justify-content:space-between;; --light: #fbcfe8;--dark: #db2777;" data-astro-cid-fjubpvhp> <span style="display:flex;gap:0.5em;align-items:center;; --light: #fbcfe8;--dark: #db2777;" data-astro-cid-fjubpvhp> <span class="circle" data-astro-cid-fjubpvhp style="--light: #fbcfe8;--dark: #db2777;"> <svg viewBox="0 0 24 24" data-astro-cid-fjubpvhp astro-icon="tabler:bulb"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="icon-tabler"><path d="M3 12h1m8-9v1m8 8h1M5.6 5.6l.7.7m12.1-.7-.7.7M9 16a5 5 0 1 1 6 0 3.5 3.5 0 0 0-1 3 2 2 0 0 1-4 0 3.5 3.5 0 0 0-1-3M9.7 17h4.6"/></g></svg> </span> <span style="font-weight:500;; --light: #fbcfe8;--dark: #db2777;" data-astro-cid-fjubpvhp>Solution</span> </span> <span class="minmax" data-astro-cid-fjubpvhp style="--light: #fbcfe8;--dark: #db2777;"> <svg viewBox="0 0 24 24" data-astro-cid-fjubpvhp class="closed" astro-icon="tabler:arrows-maximize"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="icon-tabler"><path d="M16 4h4v4M14 10l6-6M8 20H4v-4M4 20l6-6M16 20h4v-4M14 14l6 6M8 4H4v4M4 4l6 6"/></g></svg> <svg viewBox="0 0 24 24" data-astro-cid-fjubpvhp class="open" astro-icon="tabler:arrows-minimize"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="icon-tabler"><path d="M5 9h4V5M3 3l6 6M5 15h4v4M3 21l6-6M19 9h-4V5M15 9l6-6M19 15h-4v4M15 15l6 6"/></g></svg> </span> </summary> <div class="content" data-astro-cid-fjubpvhp style="--light: #fbcfe8;--dark: #db2777;"> <div style="margin: 1rem;; --light: #fbcfe8;--dark: #db2777;" data-astro-cid-fjubpvhp> <p>A possible solution is:</p><pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#F97583">def</span><span style="color:#B392F0"> path_from</span><span style="color:#E1E4E8">(maze, source):</span></span>
<span class="line"><span style="color:#E1E4E8">    vertices, edges, _ </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> maze_to_graph(maze)</span></span>
<span class="line"><span style="color:#E1E4E8">    todo </span><span style="color:#F97583">=</span><span style="color:#79B8FF"> set</span><span style="color:#E1E4E8">()</span></span>
<span class="line"><span style="color:#E1E4E8">    done </span><span style="color:#F97583">=</span><span style="color:#79B8FF"> set</span><span style="color:#E1E4E8">()</span></span>
<span class="line"><span style="color:#E1E4E8">    path </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> {}</span></span>
<span class="line"><span style="color:#F97583">    if</span><span style="color:#E1E4E8"> source </span><span style="color:#F97583">in</span><span style="color:#E1E4E8"> maze:</span></span>
<span class="line"><span style="color:#E1E4E8">       todo.add(source)</span></span>
<span class="line"><span style="color:#E1E4E8">       path[source] </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> [source]</span></span>
<span class="line"><span style="color:#F97583">    while</span><span style="color:#E1E4E8"> todo:</span></span>
<span class="line"><span style="color:#E1E4E8">        current </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> todo.pop()</span></span>
<span class="line"><span style="color:#E1E4E8">        neighbors </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#E1E4E8">            v </span><span style="color:#F97583">for</span><span style="color:#E1E4E8"> v </span><span style="color:#F97583">in</span><span style="color:#E1E4E8"> vertices </span></span>
<span class="line"><span style="color:#F97583">            if</span><span style="color:#E1E4E8"> (current, v) </span><span style="color:#F97583">in</span><span style="color:#E1E4E8"> edges</span></span>
<span class="line"><span style="color:#E1E4E8">        }</span></span>
<span class="line"><span style="color:#F97583">        for</span><span style="color:#E1E4E8"> n </span><span style="color:#F97583">in</span><span style="color:#E1E4E8"> neighbors:</span></span>
<span class="line"><span style="color:#F97583">            if</span><span style="color:#E1E4E8"> n </span><span style="color:#F97583">not</span><span style="color:#F97583"> in</span><span style="color:#E1E4E8"> done </span><span style="color:#F97583">and</span><span style="color:#E1E4E8"> n </span><span style="color:#F97583">not</span><span style="color:#F97583"> in</span><span style="color:#E1E4E8"> todo:</span></span>
<span class="line"><span style="color:#E1E4E8">                path[n] </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> path[current] </span><span style="color:#F97583">+</span><span style="color:#E1E4E8"> [n]</span></span>
<span class="line"><span style="color:#E1E4E8">                todo.add(n)</span></span>
<span class="line"><span style="color:#E1E4E8">        done.add(current)</span></span>
<span class="line"><span style="color:#F97583">    return</span><span style="color:#E1E4E8"> path</span></span></code></pre> </div> </div> </details> </aside>   
<p>Use this function to find a path joining the top left and bottom right corners
of the maze <code>random_maze</code> and graphically represent the result by updating
your function <code>draw_maze</code>.</p>

<figure><img src="/python/_astro/maze-path.ff19f2cc_yl7UM.webp" alt="Path to the bottom right corner" style="border-radius: 0.375rem;margin-left:0; margin-right:0;" width="660" height="697" loading="lazy" decoding="async"><figcaption><p>A path that joins the top left corner and the bottom right one (in pink).</p></figcaption></figure>
<aside data-astro-cid-fjubpvhp style="--light: #fbcfe8;--dark: #db2777;"> <details class="" data-astro-cid-fjubpvhp style="--light: #fbcfe8;--dark: #db2777;"> <summary style="display:flex;align-items:center;justify-content:space-between;; --light: #fbcfe8;--dark: #db2777;" data-astro-cid-fjubpvhp> <span style="display:flex;gap:0.5em;align-items:center;; --light: #fbcfe8;--dark: #db2777;" data-astro-cid-fjubpvhp> <span class="circle" data-astro-cid-fjubpvhp style="--light: #fbcfe8;--dark: #db2777;"> <svg viewBox="0 0 24 24" data-astro-cid-fjubpvhp astro-icon="tabler:bulb"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="icon-tabler"><path d="M3 12h1m8-9v1m8 8h1M5.6 5.6l.7.7m12.1-.7-.7.7M9 16a5 5 0 1 1 6 0 3.5 3.5 0 0 0-1 3 2 2 0 0 1-4 0 3.5 3.5 0 0 0-1-3M9.7 17h4.6"/></g></svg> </span> <span style="font-weight:500;; --light: #fbcfe8;--dark: #db2777;" data-astro-cid-fjubpvhp>Solution</span> </span> <span class="minmax" data-astro-cid-fjubpvhp style="--light: #fbcfe8;--dark: #db2777;"> <svg viewBox="0 0 24 24" data-astro-cid-fjubpvhp class="closed" astro-icon="tabler:arrows-maximize"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="icon-tabler"><path d="M16 4h4v4M14 10l6-6M8 20H4v-4M4 20l6-6M16 20h4v-4M14 14l6 6M8 4H4v4M4 4l6 6"/></g></svg> <svg viewBox="0 0 24 24" data-astro-cid-fjubpvhp class="open" astro-icon="tabler:arrows-minimize"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="icon-tabler"><path d="M5 9h4V5M3 3l6 6M5 15h4v4M3 21l6-6M19 9h-4V5M15 9l6-6M19 15h-4v4M15 15l6 6"/></g></svg> </span> </summary> <div class="content" data-astro-cid-fjubpvhp style="--light: #fbcfe8;--dark: #db2777;"> <div style="margin: 1rem;; --light: #fbcfe8;--dark: #db2777;" data-astro-cid-fjubpvhp> <p>We can extend our function <code>draw_maze</code> as follows:</p><pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#79B8FF">PINK</span><span style="color:#F97583"> =</span><span style="color:#79B8FF"> 14</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">def</span><span style="color:#B392F0"> draw_maze</span><span style="color:#E1E4E8">(maze, cells</span><span style="color:#F97583">=</span><span style="color:#79B8FF">None</span><span style="color:#E1E4E8">, path</span><span style="color:#F97583">=</span><span style="color:#79B8FF">None</span><span style="color:#E1E4E8">):</span></span>
<span class="line"><span style="color:#E1E4E8">    display(</span><span style="color:#79B8FF">BLACK</span><span style="color:#E1E4E8">)</span></span>
<span class="line"><span style="color:#E1E4E8">    display(maze, </span><span style="color:#79B8FF">WHITE</span><span style="color:#E1E4E8">, maze)</span></span>
<span class="line"><span style="color:#F97583">    if</span><span style="color:#E1E4E8"> cells </span><span style="color:#F97583">is</span><span style="color:#F97583"> not</span><span style="color:#79B8FF"> None</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#E1E4E8">        display(cells, </span><span style="color:#79B8FF">LIGHT_GREEN</span><span style="color:#E1E4E8">)</span></span>
<span class="line"><span style="color:#F97583">    if</span><span style="color:#E1E4E8"> path </span><span style="color:#F97583">is</span><span style="color:#F97583"> not</span><span style="color:#79B8FF"> None</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#E1E4E8">        display(path, </span><span style="color:#79B8FF">PINK</span><span style="color:#E1E4E8">)</span></span></code></pre><p>and use it like that:</p><pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#E1E4E8">target_to_path </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> path_from(random_maze, </span><span style="color:#79B8FF">TOP_LEFT</span><span style="color:#E1E4E8">)</span></span>
<span class="line"><span style="color:#79B8FF">BOTTOM_RIGHT</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> (</span><span style="color:#79B8FF">WIDTH</span><span style="color:#F97583"> -</span><span style="color:#79B8FF"> 1</span><span style="color:#E1E4E8">, </span><span style="color:#79B8FF">HEIGHT</span><span style="color:#F97583"> -</span><span style="color:#79B8FF"> 1</span><span style="color:#E1E4E8">)</span></span>
<span class="line"><span style="color:#E1E4E8">path </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> target_to_path[</span><span style="color:#79B8FF">BOTTOM_RIGHT</span><span style="color:#E1E4E8">]</span></span>
<span class="line"><span style="color:#E1E4E8">draw_maze(random_maze, </span><span style="color:#FFAB70">path</span><span style="color:#F97583">=</span><span style="color:#E1E4E8">path)</span></span></code></pre> </div> </div> </details> </aside>   
<h2 id="snake-game-autopilot">Snake Game: Autopilot</h2>
<p>Go back to the snake game of the previous session, discard the user inputs
and instead use your brand new path finding algorithm to select the snake
next move.</p>
<div style="position:relative;"><video width="768" style="border-radius: 0.375rem; width: 100%; height: auto;" autoplay loop><source src="../videos/autopilot.webm" type="video/webm"/></video><a href="../autopilot" style="color:black;text-decoration:none;line-height:1rem"><div style="position: absolute; top: 1rem; left: 1rem; background-color: white;
padding: 0.0rem; border-radius:100%; width:3rem; height:3rem; font-size:36px;
display:flex; align-items: center; justify-content: center;"><span style="position: relative; top:-2px;">🎮</span></div></a></div>
<aside data-astro-cid-fjubpvhp style="--light: #fbcfe8;--dark: #db2777;"> <details class="" data-astro-cid-fjubpvhp style="--light: #fbcfe8;--dark: #db2777;"> <summary style="display:flex;align-items:center;justify-content:space-between;; --light: #fbcfe8;--dark: #db2777;" data-astro-cid-fjubpvhp> <span style="display:flex;gap:0.5em;align-items:center;; --light: #fbcfe8;--dark: #db2777;" data-astro-cid-fjubpvhp> <span class="circle" data-astro-cid-fjubpvhp style="--light: #fbcfe8;--dark: #db2777;"> <svg viewBox="0 0 24 24" data-astro-cid-fjubpvhp astro-icon="tabler:bulb"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="icon-tabler"><path d="M3 12h1m8-9v1m8 8h1M5.6 5.6l.7.7m12.1-.7-.7.7M9 16a5 5 0 1 1 6 0 3.5 3.5 0 0 0-1 3 2 2 0 0 1-4 0 3.5 3.5 0 0 0-1-3M9.7 17h4.6"/></g></svg> </span> <span style="font-weight:500;; --light: #fbcfe8;--dark: #db2777;" data-astro-cid-fjubpvhp>Solution</span> </span> <span class="minmax" data-astro-cid-fjubpvhp style="--light: #fbcfe8;--dark: #db2777;"> <svg viewBox="0 0 24 24" data-astro-cid-fjubpvhp class="closed" astro-icon="tabler:arrows-maximize"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="icon-tabler"><path d="M16 4h4v4M14 10l6-6M8 20H4v-4M4 20l6-6M16 20h4v-4M14 14l6 6M8 4H4v4M4 4l6 6"/></g></svg> <svg viewBox="0 0 24 24" data-astro-cid-fjubpvhp class="open" astro-icon="tabler:arrows-minimize"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="icon-tabler"><path d="M5 9h4V5M3 3l6 6M5 15h4v4M3 21l6-6M19 9h-4V5M15 9l6-6M19 15h-4v4M15 15l6 6"/></g></svg> </span> </summary> <div class="content" data-astro-cid-fjubpvhp style="--light: #fbcfe8;--dark: #db2777;"> <div style="margin: 1rem;; --light: #fbcfe8;--dark: #db2777;" data-astro-cid-fjubpvhp> <p><code>constants.py</code>:</p><pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#F97583">import</span><span style="color:#E1E4E8"> pyxel</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D"># Geometry</span></span>
<span class="line"><span style="color:#79B8FF">WIDTH</span><span style="color:#F97583"> =</span><span style="color:#79B8FF"> 30</span></span>
<span class="line"><span style="color:#79B8FF">HEIGHT</span><span style="color:#F97583"> =</span><span style="color:#79B8FF"> 30</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D"># Frame rate</span></span>
<span class="line"><span style="color:#79B8FF">FPS</span><span style="color:#F97583"> =</span><span style="color:#79B8FF"> 10</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D"># Colors</span></span>
<span class="line"><span style="color:#79B8FF">BLACK</span><span style="color:#F97583"> =</span><span style="color:#79B8FF"> 0</span></span>
<span class="line"><span style="color:#79B8FF">WHITE</span><span style="color:#F97583"> =</span><span style="color:#79B8FF"> 7</span></span>
<span class="line"><span style="color:#79B8FF">PINK</span><span style="color:#F97583"> =</span><span style="color:#79B8FF"> 8</span></span>
<span class="line"><span style="color:#79B8FF">DARK_GREEN</span><span style="color:#F97583"> =</span><span style="color:#79B8FF"> 3</span></span>
<span class="line"><span style="color:#79B8FF">LIGHT_GREEN</span><span style="color:#F97583"> =</span><span style="color:#79B8FF"> 11</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D"># Directions</span></span>
<span class="line"><span style="color:#79B8FF">UP</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> [</span><span style="color:#79B8FF">0</span><span style="color:#E1E4E8">, </span><span style="color:#F97583">-</span><span style="color:#79B8FF">1</span><span style="color:#E1E4E8">]</span></span>
<span class="line"><span style="color:#79B8FF">RIGHT</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> [</span><span style="color:#79B8FF">1</span><span style="color:#E1E4E8">, </span><span style="color:#79B8FF">0</span><span style="color:#E1E4E8">]</span></span>
<span class="line"><span style="color:#79B8FF">DOWN</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> [</span><span style="color:#79B8FF">0</span><span style="color:#E1E4E8">, </span><span style="color:#79B8FF">1</span><span style="color:#E1E4E8">]</span></span>
<span class="line"><span style="color:#79B8FF">LEFT</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> [</span><span style="color:#F97583">-</span><span style="color:#79B8FF">1</span><span style="color:#E1E4E8">, </span><span style="color:#79B8FF">0</span><span style="color:#E1E4E8">]</span></span>
<span class="line"><span style="color:#79B8FF">ARROW_KEYS</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> [</span></span>
<span class="line"><span style="color:#E1E4E8">    pyxel.</span><span style="color:#79B8FF">KEY_UP</span><span style="color:#E1E4E8">, </span></span>
<span class="line"><span style="color:#E1E4E8">    pyxel.</span><span style="color:#79B8FF">KEY_DOWN</span><span style="color:#E1E4E8">, </span></span>
<span class="line"><span style="color:#E1E4E8">    pyxel.</span><span style="color:#79B8FF">KEY_LEFT</span><span style="color:#E1E4E8">, </span></span>
<span class="line"><span style="color:#E1E4E8">    pyxel.</span><span style="color:#79B8FF">KEY_RIGHT</span></span>
<span class="line"><span style="color:#E1E4E8">]</span></span></code></pre><p><code>maze.py</code>:</p><pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#F97583">from</span><span style="color:#E1E4E8"> constants </span><span style="color:#F97583">import</span><span style="color:#79B8FF"> UP</span><span style="color:#E1E4E8">, </span><span style="color:#79B8FF">RIGHT</span><span style="color:#E1E4E8">, </span><span style="color:#79B8FF">DOWN</span><span style="color:#E1E4E8">, </span><span style="color:#79B8FF">LEFT</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">def</span><span style="color:#B392F0"> maze_to_graph</span><span style="color:#E1E4E8">(maze):</span></span>
<span class="line"><span style="color:#E1E4E8">    vertices </span><span style="color:#F97583">=</span><span style="color:#79B8FF"> set</span><span style="color:#E1E4E8">(maze)</span></span>
<span class="line"><span style="color:#E1E4E8">    edges </span><span style="color:#F97583">=</span><span style="color:#79B8FF"> set</span><span style="color:#E1E4E8">()</span></span>
<span class="line"><span style="color:#E1E4E8">    weights </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> {}</span></span>
<span class="line"><span style="color:#F97583">    for</span><span style="color:#E1E4E8"> vertex </span><span style="color:#F97583">in</span><span style="color:#E1E4E8"> vertices:</span></span>
<span class="line"><span style="color:#E1E4E8">        x, y </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> vertex</span></span>
<span class="line"><span style="color:#F97583">        for</span><span style="color:#E1E4E8"> (dx, dy) </span><span style="color:#F97583">in</span><span style="color:#E1E4E8"> [</span><span style="color:#79B8FF">UP</span><span style="color:#E1E4E8">, </span><span style="color:#79B8FF">RIGHT</span><span style="color:#E1E4E8">, </span><span style="color:#79B8FF">DOWN</span><span style="color:#E1E4E8">, </span><span style="color:#79B8FF">LEFT</span><span style="color:#E1E4E8">]:</span></span>
<span class="line"><span style="color:#E1E4E8">            neighbor </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> (x </span><span style="color:#F97583">+</span><span style="color:#E1E4E8"> dx, y </span><span style="color:#F97583">+</span><span style="color:#E1E4E8"> dy)</span></span>
<span class="line"><span style="color:#F97583">            if</span><span style="color:#E1E4E8"> neighbor </span><span style="color:#F97583">in</span><span style="color:#E1E4E8"> vertices:</span></span>
<span class="line"><span style="color:#E1E4E8">                edge </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> (vertex, neighbor)</span></span>
<span class="line"><span style="color:#E1E4E8">                edges.add(edge)</span></span>
<span class="line"><span style="color:#E1E4E8">                weights[edge] </span><span style="color:#F97583">=</span><span style="color:#79B8FF"> 1</span></span>
<span class="line"><span style="color:#F97583">    return</span><span style="color:#E1E4E8"> (vertices, edges, weights)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">def</span><span style="color:#B392F0"> path_from</span><span style="color:#E1E4E8">(maze, source):</span></span>
<span class="line"><span style="color:#E1E4E8">    vertices, edges, _ </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> maze_to_graph(maze)</span></span>
<span class="line"><span style="color:#E1E4E8">    todo </span><span style="color:#F97583">=</span><span style="color:#79B8FF"> set</span><span style="color:#E1E4E8">()</span></span>
<span class="line"><span style="color:#E1E4E8">    done </span><span style="color:#F97583">=</span><span style="color:#79B8FF"> set</span><span style="color:#E1E4E8">()</span></span>
<span class="line"><span style="color:#E1E4E8">    path </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> {}</span></span>
<span class="line"><span style="color:#F97583">    if</span><span style="color:#E1E4E8"> source </span><span style="color:#F97583">in</span><span style="color:#E1E4E8"> maze:</span></span>
<span class="line"><span style="color:#E1E4E8">       todo.add(source)</span></span>
<span class="line"><span style="color:#E1E4E8">       path[source] </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> [source]</span></span>
<span class="line"><span style="color:#F97583">    while</span><span style="color:#E1E4E8"> todo:</span></span>
<span class="line"><span style="color:#E1E4E8">        current </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> todo.pop()</span></span>
<span class="line"><span style="color:#E1E4E8">        neighbors </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#E1E4E8">            v </span><span style="color:#F97583">for</span><span style="color:#E1E4E8"> v </span><span style="color:#F97583">in</span><span style="color:#E1E4E8"> vertices </span></span>
<span class="line"><span style="color:#F97583">            if</span><span style="color:#E1E4E8"> (current, v) </span><span style="color:#F97583">in</span><span style="color:#E1E4E8"> edges</span></span>
<span class="line"><span style="color:#E1E4E8">        }</span></span>
<span class="line"><span style="color:#F97583">        for</span><span style="color:#E1E4E8"> n </span><span style="color:#F97583">in</span><span style="color:#E1E4E8"> neighbors:</span></span>
<span class="line"><span style="color:#F97583">            if</span><span style="color:#E1E4E8"> n </span><span style="color:#F97583">not</span><span style="color:#F97583"> in</span><span style="color:#E1E4E8"> done </span><span style="color:#F97583">and</span><span style="color:#E1E4E8"> n </span><span style="color:#F97583">not</span><span style="color:#F97583"> in</span><span style="color:#E1E4E8"> todo:</span></span>
<span class="line"><span style="color:#E1E4E8">                path[n] </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> path[current] </span><span style="color:#F97583">+</span><span style="color:#E1E4E8"> [n]</span></span>
<span class="line"><span style="color:#E1E4E8">                todo.add(n)</span></span>
<span class="line"><span style="color:#E1E4E8">        done.add(current)</span></span>
<span class="line"><span style="color:#F97583">    return</span><span style="color:#E1E4E8"> path</span></span></code></pre><p><code>snake.py</code>:</p><pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#F97583">import</span><span style="color:#E1E4E8"> pyxel</span></span>
<span class="line"><span style="color:#F97583">from</span><span style="color:#E1E4E8"> constants </span><span style="color:#F97583">import</span><span style="color:#F97583"> *</span></span>
<span class="line"><span style="color:#F97583">from</span><span style="color:#E1E4E8"> maze </span><span style="color:#F97583">import</span><span style="color:#E1E4E8"> path_from</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">def</span><span style="color:#B392F0"> spawn_new_rocks</span><span style="color:#E1E4E8">():</span></span>
<span class="line"><span style="color:#F97583">    global</span><span style="color:#E1E4E8"> rocks</span></span>
<span class="line"><span style="color:#E1E4E8">    rocks </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> []</span></span>
<span class="line"><span style="color:#F97583">    for</span><span style="color:#E1E4E8"> i </span><span style="color:#F97583">in</span><span style="color:#79B8FF"> range</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">WIDTH</span><span style="color:#E1E4E8">):</span></span>
<span class="line"><span style="color:#F97583">        for</span><span style="color:#E1E4E8"> j </span><span style="color:#F97583">in</span><span style="color:#79B8FF"> range</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">HEIGHT</span><span style="color:#E1E4E8">):</span></span>
<span class="line"><span style="color:#F97583">            if</span><span style="color:#E1E4E8"> (i</span><span style="color:#F97583">+</span><span style="color:#E1E4E8">j) </span><span style="color:#F97583">%</span><span style="color:#79B8FF"> 5</span><span style="color:#F97583"> ==</span><span style="color:#79B8FF"> 0</span><span style="color:#F97583"> and</span><span style="color:#E1E4E8"> (i</span><span style="color:#F97583">-</span><span style="color:#E1E4E8">j) </span><span style="color:#F97583">%</span><span style="color:#79B8FF"> 11</span><span style="color:#F97583"> ==</span><span style="color:#79B8FF"> 0</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#E1E4E8">                rocks.append((i, j))</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">def</span><span style="color:#B392F0"> spawn_new_snake</span><span style="color:#E1E4E8">():</span></span>
<span class="line"><span style="color:#F97583">    global</span><span style="color:#E1E4E8"> snake_geometry, snake_direction</span></span>
<span class="line"><span style="color:#E1E4E8">    snake_geometry </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> [</span></span>
<span class="line"><span style="color:#E1E4E8">        (</span><span style="color:#79B8FF">10</span><span style="color:#E1E4E8">, </span><span style="color:#79B8FF">15</span><span style="color:#E1E4E8">),</span></span>
<span class="line"><span style="color:#E1E4E8">        (</span><span style="color:#79B8FF">11</span><span style="color:#E1E4E8">, </span><span style="color:#79B8FF">15</span><span style="color:#E1E4E8">),</span></span>
<span class="line"><span style="color:#E1E4E8">        (</span><span style="color:#79B8FF">12</span><span style="color:#E1E4E8">, </span><span style="color:#79B8FF">15</span><span style="color:#E1E4E8">),</span></span>
<span class="line"><span style="color:#E1E4E8">    ]</span></span>
<span class="line"><span style="color:#E1E4E8">    snake_direction </span><span style="color:#F97583">=</span><span style="color:#79B8FF"> RIGHT</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">def</span><span style="color:#B392F0"> spawn_new_fruit</span><span style="color:#E1E4E8">():</span></span>
<span class="line"><span style="color:#F97583">    global</span><span style="color:#E1E4E8"> fruit</span></span>
<span class="line"><span style="color:#F97583">    while</span><span style="color:#79B8FF"> True</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#E1E4E8">        fruit </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> (pyxel.rndi(</span><span style="color:#79B8FF">0</span><span style="color:#E1E4E8">, </span><span style="color:#79B8FF">WIDTH</span><span style="color:#F97583">-</span><span style="color:#79B8FF">1</span><span style="color:#E1E4E8">), pyxel.rndi(</span><span style="color:#79B8FF">0</span><span style="color:#E1E4E8">, </span><span style="color:#79B8FF">HEIGHT</span><span style="color:#F97583">-</span><span style="color:#79B8FF">1</span><span style="color:#E1E4E8">))</span></span>
<span class="line"><span style="color:#F97583">        if</span><span style="color:#E1E4E8"> fruit </span><span style="color:#F97583">not</span><span style="color:#F97583"> in</span><span style="color:#E1E4E8"> snake_geometry </span><span style="color:#F97583">and</span><span style="color:#E1E4E8"> fruit </span><span style="color:#F97583">not</span><span style="color:#F97583"> in</span><span style="color:#E1E4E8"> rocks:</span></span>
<span class="line"><span style="color:#F97583">            break</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">def</span><span style="color:#B392F0"> spawn_everything</span><span style="color:#E1E4E8">():</span></span>
<span class="line"><span style="color:#E1E4E8">    spawn_new_rocks()</span></span>
<span class="line"><span style="color:#E1E4E8">    spawn_new_snake()</span></span>
<span class="line"><span style="color:#E1E4E8">    spawn_new_fruit()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">path_to_fruit </span><span style="color:#F97583">=</span><span style="color:#79B8FF"> None</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">def</span><span style="color:#B392F0"> compute_path_to_fruit</span><span style="color:#E1E4E8">():</span></span>
<span class="line"><span style="color:#E1E4E8">    head, body </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> snake_geometry[</span><span style="color:#F97583">-</span><span style="color:#79B8FF">1</span><span style="color:#E1E4E8">], snake_geometry[:</span><span style="color:#F97583">-</span><span style="color:#79B8FF">1</span><span style="color:#E1E4E8">]</span></span>
<span class="line"><span style="color:#E1E4E8">    maze </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> {(i, j) </span><span style="color:#F97583">for</span><span style="color:#E1E4E8"> j </span><span style="color:#F97583">in</span><span style="color:#79B8FF"> range</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">HEIGHT</span><span style="color:#E1E4E8">) </span><span style="color:#F97583">for</span><span style="color:#E1E4E8"> i </span><span style="color:#F97583">in</span><span style="color:#79B8FF"> range</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">WIDTH</span><span style="color:#E1E4E8">)}</span></span>
<span class="line"><span style="color:#E1E4E8">    maze </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> maze </span><span style="color:#F97583">-</span><span style="color:#79B8FF"> set</span><span style="color:#E1E4E8">(rocks)</span></span>
<span class="line"><span style="color:#E1E4E8">    maze </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> maze </span><span style="color:#F97583">-</span><span style="color:#79B8FF"> set</span><span style="color:#E1E4E8">(body)</span></span>
<span class="line"><span style="color:#E1E4E8">    path_map </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> path_from(maze, head)</span></span>
<span class="line"><span style="color:#F97583">    if</span><span style="color:#E1E4E8"> fruit </span><span style="color:#F97583">in</span><span style="color:#E1E4E8"> path_map:</span></span>
<span class="line"><span style="color:#F97583">        return</span><span style="color:#E1E4E8"> path_map[fruit]</span></span>
<span class="line"><span style="color:#F97583">    else</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#F97583">        return</span><span style="color:#79B8FF"> None</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">def</span><span style="color:#B392F0"> select_move</span><span style="color:#E1E4E8">():</span></span>
<span class="line"><span style="color:#F97583">    global</span><span style="color:#E1E4E8"> snake_direction, path_to_fruit</span></span>
<span class="line"><span style="color:#F97583">    if</span><span style="color:#E1E4E8"> path_to_fruit </span><span style="color:#F97583">is</span><span style="color:#79B8FF"> None</span><span style="color:#F97583"> or</span><span style="color:#79B8FF"> len</span><span style="color:#E1E4E8">(path_to_fruit) </span><span style="color:#F97583">==</span><span style="color:#79B8FF"> 1</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#E1E4E8">        path_to_fruit </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> compute_path_to_fruit()</span></span>
<span class="line"><span style="color:#F97583">    if</span><span style="color:#E1E4E8"> path_to_fruit </span><span style="color:#F97583">is</span><span style="color:#F97583"> not</span><span style="color:#79B8FF"> None</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#E1E4E8">        current, </span><span style="color:#79B8FF">next</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> path_to_fruit[</span><span style="color:#79B8FF">0</span><span style="color:#E1E4E8">], path_to_fruit[</span><span style="color:#79B8FF">1</span><span style="color:#E1E4E8">]</span></span>
<span class="line"><span style="color:#E1E4E8">        snake_direction </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> (</span><span style="color:#79B8FF">next</span><span style="color:#E1E4E8">[</span><span style="color:#79B8FF">0</span><span style="color:#E1E4E8">] </span><span style="color:#F97583">-</span><span style="color:#E1E4E8"> current[</span><span style="color:#79B8FF">0</span><span style="color:#E1E4E8">], </span><span style="color:#79B8FF">next</span><span style="color:#E1E4E8">[</span><span style="color:#79B8FF">1</span><span style="color:#E1E4E8">] </span><span style="color:#F97583">-</span><span style="color:#E1E4E8"> current[</span><span style="color:#79B8FF">1</span><span style="color:#E1E4E8">])</span></span>
<span class="line"><span style="color:#F97583">        del</span><span style="color:#E1E4E8"> path_to_fruit[</span><span style="color:#79B8FF">0</span><span style="color:#E1E4E8">]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">def</span><span style="color:#B392F0"> crash</span><span style="color:#E1E4E8">(head):</span></span>
<span class="line"><span style="color:#9ECBFF">    &quot;&quot;&quot;</span></span>
<span class="line"><span style="color:#9ECBFF">    Returns True if the snake crashes: </span></span>
<span class="line"><span style="color:#9ECBFF">      - into itself, </span></span>
<span class="line"><span style="color:#9ECBFF">      - into a rock, </span></span>
<span class="line"><span style="color:#9ECBFF">      - or into the arena wall.</span></span>
<span class="line"><span style="color:#9ECBFF">    &quot;&quot;&quot;</span></span>
<span class="line"><span style="color:#F97583">    return</span><span style="color:#E1E4E8"> (</span></span>
<span class="line"><span style="color:#E1E4E8">        head </span><span style="color:#F97583">in</span><span style="color:#E1E4E8"> snake_geometry</span></span>
<span class="line"><span style="color:#F97583">        or</span><span style="color:#E1E4E8"> head </span><span style="color:#F97583">in</span><span style="color:#E1E4E8"> rocks</span></span>
<span class="line"><span style="color:#F97583">        or</span><span style="color:#E1E4E8"> (</span></span>
<span class="line"><span style="color:#E1E4E8">        head[</span><span style="color:#79B8FF">0</span><span style="color:#E1E4E8">] </span><span style="color:#F97583">&lt;</span><span style="color:#79B8FF"> 0</span></span>
<span class="line"><span style="color:#F97583">        or</span><span style="color:#E1E4E8"> head[</span><span style="color:#79B8FF">0</span><span style="color:#E1E4E8">] </span><span style="color:#F97583">&gt;</span><span style="color:#79B8FF"> WIDTH</span><span style="color:#F97583">-</span><span style="color:#79B8FF">1</span></span>
<span class="line"><span style="color:#F97583">        or</span><span style="color:#E1E4E8"> head[</span><span style="color:#79B8FF">1</span><span style="color:#E1E4E8">] </span><span style="color:#F97583">&lt;</span><span style="color:#79B8FF"> 0</span></span>
<span class="line"><span style="color:#F97583">        or</span><span style="color:#E1E4E8"> head[</span><span style="color:#79B8FF">1</span><span style="color:#E1E4E8">] </span><span style="color:#F97583">&gt;</span><span style="color:#79B8FF"> HEIGHT</span><span style="color:#F97583">-</span><span style="color:#79B8FF">1</span></span>
<span class="line"><span style="color:#E1E4E8">        )</span></span>
<span class="line"><span style="color:#E1E4E8">    )</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">def</span><span style="color:#B392F0"> snake_move</span><span style="color:#E1E4E8">():</span></span>
<span class="line"><span style="color:#F97583">    global</span><span style="color:#E1E4E8"> snake_geometry, fruit</span></span>
<span class="line"><span style="color:#E1E4E8">    snake_head </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> snake_geometry[</span><span style="color:#F97583">-</span><span style="color:#79B8FF">1</span><span style="color:#E1E4E8">]</span></span>
<span class="line"><span style="color:#E1E4E8">    new_snake_head </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> (</span></span>
<span class="line"><span style="color:#E1E4E8">        snake_head[</span><span style="color:#79B8FF">0</span><span style="color:#E1E4E8">] </span><span style="color:#F97583">+</span><span style="color:#E1E4E8"> snake_direction[</span><span style="color:#79B8FF">0</span><span style="color:#E1E4E8">],</span></span>
<span class="line"><span style="color:#E1E4E8">        snake_head[</span><span style="color:#79B8FF">1</span><span style="color:#E1E4E8">] </span><span style="color:#F97583">+</span><span style="color:#E1E4E8"> snake_direction[</span><span style="color:#79B8FF">1</span><span style="color:#E1E4E8">],</span></span>
<span class="line"><span style="color:#E1E4E8">    )</span></span>
<span class="line"><span style="color:#F97583">    if</span><span style="color:#E1E4E8"> crash(new_snake_head): </span><span style="color:#6A737D"># 💀</span></span>
<span class="line"><span style="color:#6A737D">        # 🐍 keep the old head and shrink the tail</span></span>
<span class="line"><span style="color:#E1E4E8">        snake_geometry </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> snake_geometry[</span><span style="color:#79B8FF">1</span><span style="color:#E1E4E8">:</span><span style="color:#F97583">-</span><span style="color:#79B8FF">1</span><span style="color:#E1E4E8">] </span><span style="color:#F97583">+</span><span style="color:#E1E4E8"> [snake_head]</span></span>
<span class="line"><span style="color:#F97583">    elif</span><span style="color:#E1E4E8"> new_snake_head </span><span style="color:#F97583">==</span><span style="color:#E1E4E8"> fruit: </span><span style="color:#6A737D"># 🍓</span></span>
<span class="line"><span style="color:#6A737D">        # 🐍 move the head and grow the tail</span></span>
<span class="line"><span style="color:#E1E4E8">        snake_geometry </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> snake_geometry </span><span style="color:#F97583">+</span><span style="color:#E1E4E8"> [new_snake_head]</span></span>
<span class="line"><span style="color:#E1E4E8">        spawn_new_fruit()</span></span>
<span class="line"><span style="color:#F97583">    else</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#6A737D">        # 🐍 move the head; the tail follows</span></span>
<span class="line"><span style="color:#E1E4E8">        snake_geometry </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> snake_geometry[</span><span style="color:#79B8FF">1</span><span style="color:#E1E4E8">:] </span><span style="color:#F97583">+</span><span style="color:#E1E4E8"> [new_snake_head]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">def</span><span style="color:#B392F0"> update</span><span style="color:#E1E4E8">():</span></span>
<span class="line"><span style="color:#E1E4E8">    select_move()</span></span>
<span class="line"><span style="color:#E1E4E8">    snake_move()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">def</span><span style="color:#B392F0"> display</span><span style="color:#E1E4E8">(color, pixels</span><span style="color:#F97583">=</span><span style="color:#79B8FF">None</span><span style="color:#E1E4E8">):</span></span>
<span class="line"><span style="color:#F97583">    if</span><span style="color:#E1E4E8"> pixels </span><span style="color:#F97583">is</span><span style="color:#79B8FF"> None</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#E1E4E8">        pyxel.cls(color)</span></span>
<span class="line"><span style="color:#F97583">    elif</span><span style="color:#79B8FF"> len</span><span style="color:#E1E4E8">(pixels) </span><span style="color:#F97583">&gt;=</span><span style="color:#79B8FF"> 1</span><span style="color:#F97583"> and</span><span style="color:#79B8FF"> isinstance</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">list</span><span style="color:#E1E4E8">(pixels)[</span><span style="color:#79B8FF">0</span><span style="color:#E1E4E8">], </span><span style="color:#79B8FF">int</span><span style="color:#E1E4E8">):</span></span>
<span class="line"><span style="color:#E1E4E8">        display(color, [pixels])</span></span>
<span class="line"><span style="color:#F97583">    else</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#F97583">        for</span><span style="color:#E1E4E8"> x, y </span><span style="color:#F97583">in</span><span style="color:#E1E4E8"> pixels:</span></span>
<span class="line"><span style="color:#E1E4E8">            pyxel.pset(x, y, color)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">def</span><span style="color:#B392F0"> draw</span><span style="color:#E1E4E8">():</span></span>
<span class="line"><span style="color:#E1E4E8">    display(</span><span style="color:#79B8FF">WHITE</span><span style="color:#E1E4E8">)</span></span>
<span class="line"><span style="color:#E1E4E8">    snake_body </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> snake_geometry[:</span><span style="color:#F97583">-</span><span style="color:#79B8FF">1</span><span style="color:#E1E4E8">]</span></span>
<span class="line"><span style="color:#E1E4E8">    snake_head </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> snake_geometry[</span><span style="color:#F97583">-</span><span style="color:#79B8FF">1</span><span style="color:#E1E4E8">]</span></span>
<span class="line"><span style="color:#E1E4E8">    display(</span><span style="color:#79B8FF">DARK_GREEN</span><span style="color:#E1E4E8">, snake_body)</span></span>
<span class="line"><span style="color:#E1E4E8">    display(</span><span style="color:#79B8FF">LIGHT_GREEN</span><span style="color:#E1E4E8">, snake_head)</span></span>
<span class="line"><span style="color:#E1E4E8">    display(</span><span style="color:#79B8FF">BLACK</span><span style="color:#E1E4E8">, rocks)</span></span>
<span class="line"><span style="color:#E1E4E8">    display(</span><span style="color:#79B8FF">PINK</span><span style="color:#E1E4E8">, fruit)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">pyxel.init(</span><span style="color:#79B8FF">WIDTH</span><span style="color:#E1E4E8">, </span><span style="color:#79B8FF">HEIGHT</span><span style="color:#E1E4E8">, </span><span style="color:#FFAB70">fps</span><span style="color:#F97583">=</span><span style="color:#79B8FF">FPS</span><span style="color:#E1E4E8">)</span></span>
<span class="line"><span style="color:#E1E4E8">spawn_everything()</span></span>
<span class="line"><span style="color:#E1E4E8">pyxel.run(update, draw)</span></span></code></pre> </div> </div> </details> </aside>   
 </main> </body></html>